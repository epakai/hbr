handbrake runner (hbr)                      https://github.com/epakai/hbr
====================== 

This is a tool for automating HandBrakeCLI runs. The goal is to allow for
encodes to be re-run with modified settings.

Usage is to specify an xml file for all relevant settings.

    hbr show.xml

You may also specify a specific episode from the xml file to encode.

    hbr show.xml -e 8

To generate an xml file, run hbr with the -g or -l option. Some tags
and options can be prefilled by the generator. See hbr --help for a list.
Generator output of hbr is to standard output. Redirect it to a file.

This generates a file with 12 outfile sections: 

    hbr -g 12 --format=mkv --basedir=/video/iso > show.xml

Generation can also use an episode list in a separate file. 
Each line of the episode list file is a episode number, then a space or tab 
followed by the episode name. Each episode starts on a new line.

    hbr -l list_of_episode --format=mkv --basedir/video/iso > show.xml

Once you generate the xml edit it to complete all fields.

============================================================================

This is a basic description of the expected work flow for hbr:

User has an iso or dvd and knows how to find which titles, chapters, audio
tracks, etc. they want to be in their encode. We will base this example
on manual editing of the xml file. Given 6 episodes to encode the user
would run:

    hbr -g 6 > show_title.xml

This produces an xml file with a <handbrake_options> element with default
values and 6 <outfile> elements. <handbrake_options> includes settings 
that effect each encode. Each <outfile> is specific to one encode.

Descriptions of the attributes of the the <handbrake_options> element:

    format        - must be mkv or mp4
    video_encoder - may be x264, x265, mpeg4, mpeg2, VP8, or theora
    video_quality - this is a number specific to each encoder
                    I recommend looking in the handbrake gui to
                    determine appropriate settings
    audio_encoder - may be av_aac, fdk_aac, fdk_haac, copy:aac, ac3,
                    copy:ac3, copy:dts, copy:dtshd, mp3, copy:mp3,
                    vorbis, flac16, flac24, copy
    audio_bitrate - Codec dependent. Handbrake gui is the best reference
                    Each codec works in a range of these potential values:
                    40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224,
                    256, 320, 384, 448, 512, 576, 640, 768, 960, 1152,
                    1344, 1536, 2304, 3072, 4608, 6144
    audio_quality - Only valid for mp3 and vorbis
                    Values are [0,10] for and [-2,10] for vorbis.
                    quality overrides bitrate
    anamorphic    - loose or strict
                    There is also a custom option not implemented in hbr
    deinterlace   - fast, slow, slower, bob, none
                    deinterlace overrides decomb
    decomb        - fast, bob, default or none
    denoise       - ultralight, light, medium, strong, default, none
	markers       - yes or no
    input_basedir - Path that specifies where to find <iso_filename>
                    for each <outfile>

Since it is tedious to fill these out. The user can combine the -g option 
with other options to fill out common elements across all <outfile> elements.
See the output of hbr --help for a full list of options.

The user configures each outfile. Here are descriptions of each element:

    <type>            - series or movie, Affects the output filename
    <iso_filename>    - The input file or device. Combined with input_basedir
                        from <handbrake_options>: 
    <dvdtitle>        - A single dvd title number
    <name>            - Freeform Series or Movie name
    <year>              - Year, four digit year used only in Movie filename
    <season>          - Season, a number used only in series filename
    <episode_number>  - Episode, a number used only in series filename
    <specific_name>   - Freeform name like an episode title or specific
                        version of a movie
    <crop>            - Amount to crop off each edge
                        top:bottom:left:right
    <chapters>        - Chapters to encode, specified as a single number 
                        or range (i.e. 3 or 5-8)
    <audio>           - Audio tracks to encode, comma separated
    <subtitle>        - Subtitle tracks to encode, comma separated

Once the xml specification file is complete run hbr. Files are output in
the current working directory. hbr should produce the encoded video files
as well as a log file with HandBrakeCLI's output.

    hbr ./show_title.xml

Output file names use Plex's media preparation guidelines:
https://support.plex.tv/hc/en-us/categories/200028098-Media-Preparation
